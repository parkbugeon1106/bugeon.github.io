<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>PJ IT COMPANY | 박부건 & 정우진</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<style>
@font-face {
  font-family: 'Pretendard';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/pretendard@1.0/Pretendard-SemiBold.woff2') format('woff2');
  font-weight: 600;
  font-display: swap;
}

:root {
  --bg: #080000;
  --accent: #990012;
  --card: #390909;
  --button: #2b0000;
  --text: #ffffff;
}

*{box-sizing:border-box;margin:0;padding:0}
body{
  background-color:var(--bg)!important;
  font-family:'Poppins',sans-serif;
  color:var(--text);
  overflow-x:hidden;
  font-size:17px;
}
.glow{
  text-shadow:
    0 0 10px var(--accent),
    0 0 25px var(--accent),
    0 0 45px var(--accent);
}

/* Header */
header{
  position:fixed;top:0;left:0;width:100%;
  display:flex;justify-content:space-between;align-items:center;
  padding:15px 40px;
  background:#080000;
  border-bottom:2px solid var(--acce웹개발자 / AI개발자 / CEO</p>
    <p><b>언어:</b> Python, Java, JavaScript, C, C++, Go, Kotlin, Swift, Ruby, C#, HTML</p>
    <p><b>직책:</b> 개발자 / CEO</p>
    <button onclick="showProfile('박부건')">경력 보기</button>
  </div>

  <div class="team-card">
    <h3>정우진</h3>
    <p><b>직책:</b> AI 개발자 / 하드웨어개발자 / CEO</p>
    <p><b>언어:</b> 한국어, Python, C, C++, C#, Java, JavaScript, Wolfram, HTML, CSS</p>
    <p><b>직책:</b> 개발자 / CEO</p>
    <button onclick="showProfile('정우진')">경력 보기</button>
  </div>
</section>

<section id="community">
  <h2 class="glow">커뮤니티</h2>
  <div id="loginBox">
    <button onclick="login()">로그인</button>
    <button onclick="logout()">로그아웃</button>
  </div>

  <!-- 관리자 전용 영역 -->
  <div id="noticeWrite" style="display:none;">
    <h3>공지 작성</h3>
    <input id="noticeTitle" placeholder="제목" style="width:90%;padding:10px;border-radius:10px;border:none;margin:5px;"><br>
    <textarea id="noticeContent" placeholder="내용" style="width:90%;padding:10px;border-radius:10px;border:none;margin:5px;"></textarea><br>
    <button onclick="writeNotice()">등록</button>
  </div>

  <h3>공지사항</h3>
  <div id="noticeList" class="card"></div>

  <h3>질문 게시판</h3>
  <input id="qName" placeholder="이름" style="width:90%;padding:10px;border-radius:10px;border:none;margin:5px;"><br>
  <textarea id="qText" placeholder="질문을 작성하세요" style="width:90%;padding:10px;border-radius:10px;border:none;margin:5px;"></textarea><br>
  <button onclick="ask()">등록</button>
  <div id="qList"></div>
</section>

<footer>
  © 2025 PJ IT COMPANY | 마지막 수정 : <span id="lastModified"></span>
</footer>

<!-- 팀원 경력 모달 -->
<div id="profileModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);justify-content:center;align-items:center;">
  <div>
    <h2 id="modalName"></h2>
    <ul id="modalContent"></ul>
    <div style="text-align:center;margin-top:20px;"><button onclick="closeProfile()">닫기</button></div>
  </div>
</div>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, query, orderBy, updateDoc } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";
import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCrq_RAL7jOWvX0f6yA7rEUflaxqPSFv9Q",
  authDomain: "pjitcompany-hp.firebaseapp.com",
  projectId: "pjitcompany-hp",
  storageBucket: "pjitcompany-hp.appspot.com",
  messagingSenderId: "576854965361",
  appId: "1:576854965361:web:b01632afe33d766d076fd0",
  measurementId: "G-8KM8CYTSHF"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);
let currentUser = null;

window.scrollToSection = function(id){document.getElementById(id).scrollIntoView({behavior:'smooth'});};

// ✅ 로그인: 관리자만 권한 부여
window.login = async function(){
  const email = prompt("관리자 이메일:");
  const password = prompt("비밀번호:");
  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    currentUser = userCredential.user;
    alert("로그인 성공!");
    renderAll();
  } catch (error) {
    alert("로그인 실패: " + error.message);
  }
};

// ✅ 로그아웃
window.logout = async function(){
  await signOut(auth);
  currentUser = null;
  alert("로그아웃되었습니다.");
  renderAll();
};

// ✅ 상태 감시
onAuthStateChanged(auth, (user) => {
  currentUser = user;
  renderAll();
});

// ✅ 공지 작성
window.writeNotice = async function(){
  if (!currentUser || currentUser.email !== "bagdoeon827@gmail.com") return alert("관리자만 작성할 수 있습니다.");
  const title = document.getElementById("noticeTitle").value;
  const content = document.getElementById("noticeContent").value;
  if (!title || !content) return alert("내용을 입력하세요.");
  await addDoc(collection(db, "notices"), { title, content, date: new Date().toLocaleString() });
  renderNotices();
};

// ✅ 공지 삭제
window.deleteNotice = async function(id){
  if (!currentUser || currentUser.email !== "bagdoeon827@gmail.com") return alert("관리자만 삭제할 수 있습니다.");
  await deleteDoc(doc(db, "notices", id));
  renderNotices();
};

// ✅ 공지 렌더링
async function renderNotices(){
  const box = document.getElementById("noticeList");
  const q = query(collection(db, "notices"), orderBy("date", "desc"));
  const snapshot = await getDocs(q);
  box.innerHTML = "";
  snapshot.forEach((docu)=>{
    const n = docu.data();
    box.innerHTML += `<div class='card'><b>${n.title}</b><p>${n.content}</p><small>${n.date}</small>${currentUser && currentUser.email === "bagdoeon827@gmail.com" ? `<br><button onclick="deleteNotice('${docu.id}')">삭제</button>` : ""}</div>`;
  });
}

// ✅ 질문 등록
window.ask = async function(){
  const name = document.getElementById("qName").value || "익명";
  const text = document.getElementById("qText").value;
  if (!text) return alert("질문을 입력하세요.");
  await addDoc(collection(db, "questions"), { name, text, answer: "", date: new Date().toLocaleString() });
  renderQuestions();
};

// ✅ 질문 답변 / 삭제
window.answerQuestion = async function(id){
  if (!currentUser || currentUser.email !== "bagdoeon827@gmail.com") return alert("관리자만 답변할 수 있습니다.");
  const ans = prompt("답변을 입력하세요:");
  if (!ans) return;
  await updateDoc(doc(db, "questions", id), { answer: ans });
  renderQuestions();
};

window.deleteQuestion = async function(id){
  if (!currentUser || currentUser.email !== "bagdoeon827@gmail.com") return alert("관리자만 삭제할 수 있습니다.");
  await deleteDoc(doc(db, "questions", id));
  renderQuestions();
};

// ✅ 질문 렌더링
async function renderQuestions(){
  const list = document.getElementById("qList");
  const q = query(collection(db, "questions"), orderBy("date", "desc"));
  const snapshot = await getDocs(q);
  list.innerHTML = "";
  snapshot.forEach((docu)=>{
    const qd = docu.data();
    list.innerHTML += `<div class='card'><p><b>${qd.name}</b>: ${qd.text}</p><small>${qd.date}</small>${qd.answer ? `<p style='color:var(--accent);'><b>답변:</b> ${qd.answer}</p>` : ""}${currentUser && currentUser.email === "bagdoeon827@gmail.com" ? `<br><button onclick="answerQuestion('${docu.id}')">답변</button><button onclick="deleteQuestion('${docu.id}')">삭제</button>` : ""}</div>`;
  });
}

// ✅ UI 렌더링 통합
window.renderAll = function(){
  renderNotices();
  renderQuestions();

  // 로그인 여부에 따라 관리자 UI 제어
  const adminEmail = "bagdoeon827@gmail.com";
  const noticeWrite = document.getElementById("noticeWrite");

  if (currentUser && currentUser.email === adminEmail) {
    noticeWrite.style.display = "block";
  } else {
    noticeWrite.style.display = "none";
  }
};

window.addEventListener("load", ()=>{renderAll();});
document.getElementById("lastModified").textContent = document.lastModified;
</script>

<script>
function showProfile(name){
  const profiles = {
    "박부건": [
      "OMIX IT COMPANY 창립자",
      "PJ IT COMPANY 공동창립자",
      "2021~2023 발명 영재원 전체 수석",
      "2023 영재원 팀 'technolage' 내 프로그래머",
      "2023~2025 과학 영재원 물리과 전체 수석",
      "2023~2025 부산 과학영재원 부산대 연계 프로그램 1등 수료",
      "2023 영재원 주관 정보+발명 융합 프로젝트 1등 (6개월)",
      "2023 영재원 내 해커톤(일명 해발해) 1등",
      "2024 영재원 주관 정보+화학 융합 프로젝트 3등 (10개월)",
      "2024~2025 과학 영재원 내 '남정네들', '세 얼간이' 팀 프로그래머",
      "전국 에그드랍 대회 1등",
      "2023~2024 해외 외국 개발팀(airlock-team2 개발팀장)",
      "2020~현재 프로그래머",
      "배부름"
    ],
    "정우진": [
      "PJ IT COMPANY 공동창립자",
      "2019~2022 과학영재",
      "과학고등학교 영재원 최우수 수료",
      "과학기술정보통신부 장관상 수상",
      "화학 올림피아드 장려상 수상",
      "부산과학전람회 우수상",
      "부산과학전람회 특상 단독 프로그래머",
      "전국과학전람회 특상 단독 프로그래머",
      "근처 맥도날드 기둥 하나 세움(추측)",
      "배고픔"
    ]
  };

  const modal=document.getElementById("profileModal");
  document.getElementById("modalName").innerText=name;
  document.getElementById("modalContent").innerHTML=profiles[name].map(i=>`<li>${i}</li>`).join("");
  modal.style.display="flex";
}
function closeProfile(){document.getElementById("profileModal").style.display="none";}
</script>
</body>
</html>
